---
import type { CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';

interface Props {
  product: CollectionEntry<'product'>;
}

const { product } = Astro.props as Props;
---

<a 
  href={`/product/${product.id}`} 
  class="block rounded-lg border border-border bg-card p-4 shadow-sm transition-all hover:shadow-md h-full"
>
  {product.data.image && (
    <div class="aspect-square overflow-hidden rounded-md">
      <Image 
        src={product.data.image} 
        alt={product.data.title} 
        class="h-full w-full object-cover"
        width={400}
        height={400}
      />
    </div>
  )}
  <div class="mt-3">
    <h3 class="text-lg font-semibold leading-tight text-foreground line-clamp-2">
      {product.data.title}
    </h3>
    <div class="mt-2 flex items-center justify-between">
      <span class="text-lg font-bold text-foreground">
        ${product.data.price}
      </span>
      {product.data.rating && (
        <div class="flex items-center">
          <span class="text-sm text-muted-foreground">
            {product.data.rating.toFixed(1)}
          </span>
        </div>
      )}
    </div>
  </div>
</a>